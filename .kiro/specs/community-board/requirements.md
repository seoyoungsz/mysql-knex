# 요구사항 문서

## 개요

이 프로젝트는 MySQL과 Knex.js를 활용한 커뮤니티 게시판 시스템을 구축하는 것을 목표로 합니다. 사용자들이 게시글을 작성하고, 댓글을 달고, 좋아요를 누르며 소통할 수 있는 플랫폼을 제공합니다. 관계형 데이터베이스 설계와 RESTful API 패턴을 학습하면서 실무에서 활용 가능한 게시판 시스템을 개발합니다.

## 요구사항

### 요구사항 1

**사용자 스토리:** 신규 사용자로서, 이메일과 비밀번호로 계정을 등록하여 커뮤니티 게시판에 참여하고 싶습니다.

#### 수락 기준

1. 사용자가 유효한 이메일, 비밀번호, 닉네임을 제공할 때 시스템은 새로운 사용자 계정을 생성해야 합니다
2. 사용자가 이미 등록된 이메일을 제공할 때 시스템은 오류 메시지를 반환해야 합니다
3. 사용자가 잘못된 이메일 형식을 제공할 때 시스템은 유효성 검사 오류를 반환해야 합니다
4. 사용자가 8자 미만의 비밀번호를 제공할 때 시스템은 유효성 검사 오류를 반환해야 합니다
5. 사용자가 이미 존재하는 닉네임을 제공할 때 시스템은 오류 메시지를 반환해야 합니다

### 요구사항 2

**사용자 스토리:** 등록된 사용자로서, 내 계정 정보로 로그인하여 게시판의 보호된 기능에 접근하고 싶습니다.

#### 수락 기준

1. 사용자가 올바른 이메일과 비밀번호를 제공할 때 시스템은 사용자를 인증하고 JWT 토큰을 반환해야 합니다
2. 사용자가 잘못된 자격 증명을 제공할 때 시스템은 인증 오류를 반환해야 합니다
3. 사용자의 JWT 토큰이 유효할 때 시스템은 보호된 엔드포인트에 대한 접근을 허용해야 합니다
4. 사용자의 JWT 토큰이 만료되었을 때 시스템은 권한 없음 오류를 반환해야 합니다

### 요구사항 3

**사용자 스토리:** 로그인한 사용자로서, 제목과 내용이 있는 게시글을 작성하여 커뮤니티와 정보를 공유하고 싶습니다.

#### 수락 기준

1. 인증된 사용자가 제목과 내용을 제공할 때 시스템은 새로운 게시글을 생성해야 합니다
2. 사용자가 인증 없이 게시글을 작성하려고 할 때 시스템은 권한 없음 오류를 반환해야 합니다
3. 사용자가 빈 제목이나 내용을 제공할 때 시스템은 유효성 검사 오류를 반환해야 합니다
4. 게시글이 생성될 때 시스템은 카테고리를 할당해야 합니다
5. 게시글이 생성될 때 시스템은 생성 시간을 기록해야 합니다

### 요구사항 4

**사용자 스토리:** 사용자로서, 게시글 목록을 보고 커뮤니티 콘텐츠를 탐색하고 싶습니다.

#### 수락 기준

1. 사용자가 게시글 목록을 요청할 때 시스템은 제목, 작성자, 카테고리, 생성일이 포함된 게시글을 반환해야 합니다
2. 게시글이 없을 때 시스템은 빈 목록을 반환해야 합니다
3. 게시글이 존재할 때 시스템은 생성일 기준 내림차순으로 반환해야 합니다
4. 사용자가 페이지네이션과 함께 게시글을 요청할 때 시스템은 지정된 페이지와 제한을 반환해야 합니다
5. 사용자가 카테고리별 게시글을 요청할 때 시스템은 지정된 카테고리로 게시글을 필터링해야 합니다

### 요구사항 5

**사용자 스토리:** 사용자로서, 댓글이 포함된 상세한 게시글 내용을 보고 전체 토론을 읽고 싶습니다.

#### 수락 기준

1. 사용자가 특정 게시글을 요청할 때 시스템은 전체 내용과 관련 댓글이 포함된 게시글을 반환해야 합니다
2. 게시글이 존재하지 않을 때 시스템은 찾을 수 없음 오류를 반환해야 합니다
3. 게시글에 댓글이 존재할 때 시스템은 시간순으로 댓글을 반환해야 합니다
4. 댓글에 대댓글이 존재할 때 시스템은 부모 댓글 아래에 중첩되어 반환해야 합니다
5. 게시글에 좋아요가 있을 때 시스템은 총 좋아요 수를 반환해야 합니다

### 요구사항 6

**사용자 스토리:** 게시글 작성자로서, 내 게시글을 편집하고 삭제하여 내 콘텐츠를 관리하고 싶습니다.

#### 수락 기준

1. 게시글 작성자가 자신의 게시글 편집을 요청할 때 시스템은 제목과 내용 수정을 허용해야 합니다
2. 작성자가 아닌 사용자가 게시글을 편집하려고 할 때 시스템은 금지됨 오류를 반환해야 합니다
3. 게시글 작성자가 자신의 게시글 삭제를 요청할 때 시스템은 게시글과 관련 데이터를 제거해야 합니다
4. 게시글이 업데이트될 때 시스템은 업데이트 시간을 기록해야 합니다
5. 게시글이 삭제될 때 시스템은 관련된 댓글과 좋아요도 함께 삭제해야 합니다

### 요구사항 7

**사용자 스토리:** 로그인한 사용자로서, 게시글에 댓글을 추가하여 토론에 참여하고 싶습니다.

#### 수락 기준

1. 인증된 사용자가 게시글에 댓글 내용을 제공할 때 시스템은 새로운 댓글을 생성해야 합니다
2. 사용자가 인증 없이 댓글을 작성하려고 할 때 시스템은 권한 없음 오류를 반환해야 합니다
3. 사용자가 빈 댓글 내용을 제공할 때 시스템은 유효성 검사 오류를 반환해야 합니다
4. 사용자가 기존 댓글에 답글을 달 때 시스템은 중첩된 답글을 생성해야 합니다 (최대 깊이 1)
5. 댓글이 생성될 때 시스템은 생성 시간을 기록해야 합니다

### 요구사항 8

**사용자 스토리:** 댓글 작성자로서, 내 댓글을 편집하고 삭제하여 내 기여를 관리하고 싶습니다.

#### 수락 기준

1. 댓글 작성자가 자신의 댓글 편집을 요청할 때 시스템은 내용 수정을 허용해야 합니다
2. 작성자가 아닌 사용자가 댓글을 편집하려고 할 때 시스템은 금지됨 오류를 반환해야 합니다
3. 댓글 작성자가 자신의 댓글 삭제를 요청할 때 시스템은 댓글을 제거해야 합니다
4. 부모 댓글이 삭제되고 답글이 있을 때 시스템은 삭제됨으로 표시하되 답글은 보이도록 유지해야 합니다
5. 답글 댓글이 삭제될 때 시스템은 완전히 제거해야 합니다

### 요구사항 9

**사용자 스토리:** 사용자로서, 게시글과 댓글에 좋아요를 눌러 좋은 콘텐츠에 대한 감사를 표현하고 싶습니다.

#### 수락 기준

1. 인증된 사용자가 게시글이나 댓글에 좋아요를 누를 때 시스템은 좋아요를 기록해야 합니다
2. 사용자가 같은 콘텐츠에 두 번 좋아요를 누르려고 할 때 시스템은 중복 좋아요를 방지해야 합니다
3. 사용자가 이전에 좋아요를 누른 콘텐츠의 좋아요를 취소할 때 시스템은 좋아요 기록을 제거해야 합니다
4. 콘텐츠에 좋아요가 눌릴 때 시스템은 좋아요 수를 증가시켜야 합니다
5. 콘텐츠의 좋아요가 취소될 때 시스템은 좋아요 수를 감소시켜야 합니다

### 요구사항 10

**사용자 스토리:** 사용자로서, 제목과 내용으로 게시글을 검색하여 특정 정보를 찾고 싶습니다.

#### 수락 기준

1. 사용자가 검색 키워드를 제공할 때 시스템은 제목이나 내용이 일치하는 게시글을 반환해야 합니다
2. 검색과 일치하는 게시글이 없을 때 시스템은 빈 결과를 반환해야 합니다
3. 검색 결과가 존재할 때 시스템은 일치하는 키워드를 강조표시해야 합니다
4. 사용자가 빈 키워드로 검색할 때 시스템은 모든 게시글을 반환해야 합니다
5. 검색이 수행될 때 시스템은 관련성 순으로 결과를 반환해야 합니다

### 요구사항 11

**사용자 스토리:** 사용자로서, 카테고리와 태그로 게시글을 필터링하여 주제별로 콘텐츠를 탐색하고 싶습니다.

#### 수락 기준

1. 사용자가 카테고리를 선택할 때 시스템은 해당 카테고리의 게시글만 반환해야 합니다
2. 사용자가 태그를 선택할 때 시스템은 해당 태그와 연관된 게시글을 반환해야 합니다
3. 여러 필터가 적용될 때 시스템은 모든 조건에 일치하는 게시글을 반환해야 합니다
4. 필터와 일치하는 게시글이 없을 때 시스템은 빈 결과를 반환해야 합니다
5. 필터가 해제될 때 시스템은 모든 게시글을 반환해야 합니다

### 요구사항 12

**사용자 스토리:** 관리자로서, 게시글과 댓글을 관리하여 커뮤니티를 조정하고 싶습니다.

#### 수락 기준

1. 관리자 사용자가 임의의 게시글 삭제를 요청할 때 시스템은 삭제를 허용해야 합니다
2. 관리자 사용자가 임의의 댓글 삭제를 요청할 때 시스템은 삭제를 허용해야 합니다
3. 관리자가 콘텐츠를 삭제할 때 시스템은 관리자 행동을 로그에 기록해야 합니다
4. 일반 사용자가 관리자 행동을 수행하려고 할 때 시스템은 금지됨 오류를 반환해야 합니다
5. 관리자가 사용자를 정지시킬 때 시스템은 해당 사용자가 새로운 콘텐츠를 생성하는 것을 방지해야 합니다