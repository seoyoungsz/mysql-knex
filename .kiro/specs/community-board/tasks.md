# 구현 계획

- [x] 1. 프로젝트 초기 설정 및 Docker 환경 구성
  - package.json 생성 및 필요한 의존성 설치 (fastify, knex, mysql2, bcrypt, @fastify/jwt, ajv 등)
  - Docker Compose 설정 파일 작성 (MySQL 8.0 컨테이너 포함)
  - Dockerfile 작성 (Node.js 앱용)
  - 환경 변수 설정 (.env.example, .env)
  - 기본 프로젝트 구조 생성 (도메인 기반 디렉토리)
  - _요구사항: 모든 기본 인프라 설정_

- [x] 2. 데이터베이스 설정 및 마이그레이션
  - Knex 설정 파일 (knexfile.js) 작성
  - 데이터베이스 연결 설정 (src/config/database.js)
  - Users 테이블 마이그레이션 작성
  - Categories 테이블 마이그레이션 작성
  - Posts 테이블 마이그레이션 작성
  - Comments 테이블 마이그레이션 작성
  - Tags 테이블 마이그레이션 작성
  - PostTags 테이블 마이그레이션 작성 (Many-to-Many)
  - Likes 테이블 마이그레이션 작성
  - 시드 데이터 파일 작성 (기본 카테고리, 테스트 사용자 등)
  - _요구사항: 1.1, 2.1, 3.3, 1.2_

- [ ] 3. Fastify 앱 기본 구조 및 플러그인 설정
  - Fastify 앱 진입점 작성 (src/app.js)
  - 데이터베이스 플러그인 작성 (src/plugins/database.js)
  - JWT 인증 플러그인 작성 (src/plugins/auth.js)
  - 에러 처리 플러그인 작성 (src/plugins/errorHandler.js)
  - 기본 라우트 등록 및 테스트
  - _요구사항: 모든 API 엔드포인트의 기반_

- [ ] 4. 사용자 도메인 구현
- [ ] 4.1 사용자 모델 및 리포지토리 구현
  - 사용자 모델 클래스 작성 (src/domains/users/model.js)
  - 사용자 리포지토리 구현 (CRUD 작업, 이메일/닉네임 중복 검사)
  - 사용자 리포지토리 단위 테스트 작성
  - _요구사항: 1.1, 1.2_

- [ ] 4.2 사용자 서비스 레이어 구현
  - 비밀번호 해싱 로직 구현 (bcrypt)
  - 사용자 생성 비즈니스 로직 구현
  - 사용자 조회/수정 비즈니스 로직 구현
  - 사용자 서비스 단위 테스트 작성
  - _요구사항: 1.1, 1.2, 1.3, 1.4, 1.5_

- [ ] 4.3 사용자 스키마 및 검증 구현
  - 회원가입 요청 스키마 작성 (AJV)
  - 사용자 프로필 수정 스키마 작성
  - 입력 검증 로직 테스트 작성
  - _요구사항: 1.3, 1.4, 1.5_

- [ ] 4.4 사용자 컨트롤러 및 라우트 구현
  - 사용자 프로필 조회 컨트롤러 구현
  - 사용자 프로필 수정 컨트롤러 구현
  - 사용자 라우트 등록 (/api/users)
  - 사용자 API 통합 테스트 작성
  - _요구사항: 사용자 관리 관련 모든 요구사항_

- [ ] 5. 인증 도메인 구현
- [ ] 5.1 인증 서비스 구현
  - JWT 토큰 생성/검증 로직 구현
  - 로그인 인증 로직 구현 (이메일/비밀번호 검증)
  - 비밀번호 비교 로직 구현
  - 인증 서비스 단위 테스트 작성
  - _요구사항: 2.1, 2.2, 2.3, 2.4_

- [ ] 5.2 인증 스키마 및 미들웨어 구현
  - 회원가입 스키마 작성 (이메일, 비밀번호, 닉네임 검증)
  - 로그인 스키마 작성
  - JWT 토큰 검증 미들웨어 구현
  - 인증 미들웨어 테스트 작성
  - _요구사항: 1.3, 1.4, 1.5, 2.1, 2.2, 2.3, 2.4_

- [ ] 5.3 인증 컨트롤러 및 라우트 구현
  - 회원가입 컨트롤러 구현
  - 로그인 컨트롤러 구현
  - 현재 사용자 정보 조회 컨트롤러 구현
  - 인증 라우트 등록 (/api/auth)
  - 인증 API 통합 테스트 작성
  - _요구사항: 1.1, 1.2, 1.3, 1.4, 1.5, 2.1, 2.2, 2.3, 2.4_

- [ ] 6. 카테고리 및 태그 도메인 구현
- [ ] 6.1 카테고리 모델 및 리포지토리 구현
  - 카테고리 모델 클래스 작성
  - 카테고리 리포지토리 구현 (조회 작업)
  - 카테고리 리포지토리 단위 테스트 작성
  - _요구사항: 11.1_

- [ ] 6.2 태그 모델 및 리포지토리 구현
  - 태그 모델 클래스 작성
  - 태그 리포지토리 구현 (CRUD 작업, 이름 기반 검색)
  - 태그 리포지토리 단위 테스트 작성
  - _요구사항: 11.2_

- [ ] 6.3 카테고리/태그 서비스 및 라우트 구현
  - 카테고리 서비스 구현 (목록 조회)
  - 태그 서비스 구현 (목록 조회, 자동 생성)
  - 카테고리/태그 라우트 구현
  - 카테고리/태그 API 통합 테스트 작성
  - _요구사항: 11.1, 11.2_

- [ ] 7. 게시글 도메인 구현
- [ ] 7.1 게시글 모델 및 리포지토리 구현
  - 게시글 모델 클래스 작성
  - 게시글 리포지토리 구현 (CRUD, 검색, 필터링, 페이지네이션)
  - 게시글-태그 관계 처리 로직 구현
  - 게시글 리포지토리 단위 테스트 작성
  - _요구사항: 3.1, 4.1, 4.2, 4.3, 4.4, 4.5, 5.1, 5.2, 5.3, 5.4, 5.5, 10.1, 10.2, 10.4, 10.5, 11.1, 11.2, 11.3, 11.4, 11.5_

- [ ] 7.2 게시글 서비스 레이어 구현
  - 게시글 생성 비즈니스 로직 구현 (태그 처리 포함)
  - 게시글 조회 비즈니스 로직 구현 (검색, 필터링)
  - 게시글 수정/삭제 권한 검증 로직 구현
  - 게시글 서비스 단위 테스트 작성
  - _요구사항: 3.1, 3.2, 3.3, 3.4, 3.5, 6.1, 6.2, 6.3, 6.4, 6.5_

- [ ] 7.3 게시글 스키마 및 검증 구현
  - 게시글 작성 스키마 작성 (제목, 내용, 카테고리, 태그 검증)
  - 게시글 수정 스키마 작성
  - 게시글 검색/필터링 쿼리 스키마 작성
  - 게시글 검증 로직 테스트 작성
  - _요구사항: 3.3, 6.4_

- [ ] 7.4 게시글 컨트롤러 및 라우트 구현
  - 게시글 목록 조회 컨트롤러 구현 (검색, 필터링, 페이지네이션)
  - 게시글 상세 조회 컨트롤러 구현
  - 게시글 작성 컨트롤러 구현
  - 게시글 수정/삭제 컨트롤러 구현
  - 게시글 라우트 등록 (/api/posts)
  - 게시글 API 통합 테스트 작성
  - _요구사항: 3.1, 3.2, 3.3, 3.4, 3.5, 4.1, 4.2, 4.3, 4.4, 4.5, 5.1, 5.2, 5.3, 5.4, 5.5, 6.1, 6.2, 6.3, 6.4, 6.5, 10.1, 10.2, 10.3, 10.4, 10.5, 11.1, 11.2, 11.3, 11.4, 11.5_

- [ ] 8. 댓글 도메인 구현
- [ ] 8.1 댓글 모델 및 리포지토리 구현
  - 댓글 모델 클래스 작성
  - 댓글 리포지토리 구현 (CRUD, 계층 구조 처리)
  - 대댓글 처리 로직 구현 (최대 깊이 1)
  - 댓글 리포지토리 단위 테스트 작성
  - _요구사항: 7.1, 7.4, 8.3, 8.4, 8.5_

- [ ] 8.2 댓글 서비스 레이어 구현
  - 댓글 생성 비즈니스 로직 구현
  - 댓글 수정/삭제 권한 검증 로직 구현
  - 부모 댓글 삭제 시 처리 로직 구현
  - 댓글 서비스 단위 테스트 작성
  - _요구사항: 7.1, 7.2, 7.3, 7.5, 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 8.3 댓글 스키마 및 검증 구현
  - 댓글 작성 스키마 작성 (내용, 부모 댓글 ID 검증)
  - 댓글 수정 스키마 작성
  - 댓글 검증 로직 테스트 작성
  - _요구사항: 7.3, 8.1_

- [ ] 8.4 댓글 컨트롤러 및 라우트 구현
  - 댓글 목록 조회 컨트롤러 구현 (계층 구조 포함)
  - 댓글 작성 컨트롤러 구현
  - 댓글 수정/삭제 컨트롤러 구현
  - 댓글 라우트 등록 (/api/posts/:postId/comments, /api/comments/:id)
  - 댓글 API 통합 테스트 작성
  - _요구사항: 5.3, 5.4, 7.1, 7.2, 7.3, 7.4, 7.5, 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 9. 좋아요 도메인 구현
- [ ] 9.1 좋아요 모델 및 리포지토리 구현
  - 좋아요 모델 클래스 작성
  - 좋아요 리포지토리 구현 (추가, 제거, 중복 검사)
  - 좋아요 수 집계 로직 구현
  - 좋아요 리포지토리 단위 테스트 작성
  - _요구사항: 9.1, 9.2, 9.3, 9.4, 9.5_

- [ ] 9.2 좋아요 서비스 레이어 구현
  - 좋아요 추가/제거 비즈니스 로직 구현
  - 중복 좋아요 방지 로직 구현
  - 좋아요 수 업데이트 로직 구현
  - 좋아요 서비스 단위 테스트 작성
  - _요구사항: 9.1, 9.2, 9.3, 9.4, 9.5_

- [ ] 9.3 좋아요 스키마 및 검증 구현
  - 좋아요 요청 스키마 작성 (대상 타입, 대상 ID 검증)
  - 좋아요 검증 로직 테스트 작성
  - _요구사항: 9.1_

- [ ] 9.4 좋아요 컨트롤러 및 라우트 구현
  - 좋아요 추가 컨트롤러 구현
  - 좋아요 제거 컨트롤러 구현
  - 좋아요 라우트 등록 (/api/likes)
  - 좋아요 API 통합 테스트 작성
  - _요구사항: 5.5, 9.1, 9.2, 9.3, 9.4, 9.5_

- [ ] 10. 관리자 기능 구현
- [ ] 10.1 관리자 권한 검증 미들웨어 구현
  - 사용자 역할 기반 권한 검증 로직 구현
  - 관리자 전용 미들웨어 작성
  - 권한 검증 미들웨어 테스트 작성
  - _요구사항: 12.4_

- [ ] 10.2 관리자 기능 서비스 구현
  - 관리자 게시글/댓글 삭제 로직 구현
  - 사용자 정지 처리 로직 구현
  - 관리자 행동 로깅 로직 구현
  - 관리자 서비스 단위 테스트 작성
  - _요구사항: 12.1, 12.2, 12.3, 12.5_

- [ ] 10.3 관리자 API 엔드포인트 구현
  - 관리자 게시글 삭제 API 구현
  - 관리자 댓글 삭제 API 구현
  - 사용자 정지 API 구현
  - 관리자 API 통합 테스트 작성
  - _요구사항: 12.1, 12.2, 12.3, 12.4, 12.5_

- [ ] 11. 통합 테스트 및 E2E 테스트 구현
- [ ] 11.1 사용자 플로우 E2E 테스트 작성
  - 회원가입 → 로그인 → 게시글 작성 → 댓글 작성 → 좋아요 플로우 테스트
  - 게시글 검색 및 필터링 플로우 테스트
  - 사용자 권한 및 소유권 검증 플로우 테스트
  - _요구사항: 모든 사용자 관련 요구사항_

- [ ] 11.2 관리자 플로우 E2E 테스트 작성
  - 관리자 로그인 → 콘텐츠 관리 → 사용자 정지 플로우 테스트
  - 관리자 권한 검증 플로우 테스트
  - _요구사항: 12.1, 12.2, 12.3, 12.4, 12.5_

- [ ] 11.3 성능 및 부하 테스트 구현
  - 게시글 목록 조회 성능 테스트
  - 검색 기능 성능 테스트
  - 동시 사용자 부하 테스트
  - _요구사항: 성능 관련 모든 요구사항_

- [ ] 12. 문서화 및 배포 준비
- [ ] 12.1 API 문서 작성
  - Swagger/OpenAPI 스펙 작성
  - API 엔드포인트 문서화
  - 요청/응답 예시 작성
  - _요구사항: 모든 API 관련 요구사항_

- [ ] 12.2 README 및 설치 가이드 작성
  - 프로젝트 개요 및 기능 설명
  - Docker를 사용한 설치 및 실행 가이드
  - 개발 환경 설정 가이드
  - 테스트 실행 가이드
  - _요구사항: 프로젝트 전체_

- [ ] 12.3 배포 설정 및 최적화
  - 프로덕션용 Docker 설정 작성
  - 환경별 설정 분리 (development, production)
  - 로깅 및 모니터링 설정
  - 보안 설정 강화
  - _요구사항: 프로젝트 전체_
